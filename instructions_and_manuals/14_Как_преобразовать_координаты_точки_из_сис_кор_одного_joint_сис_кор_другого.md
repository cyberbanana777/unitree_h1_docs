# –ö–∞–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ –æ—Ç—Å—á—ë—Ç–∞ —Ä–æ–±–æ—Ç–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ ROS 2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Ç–∏–ª–∏—Ç–∞ `tf2_echo`. –û–Ω–∞ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π (TF) –∏ –≤—ã–≤–æ–¥–∏—Ç –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –æ—Ç—Å—á—ë—Ç–∞ (—Ñ—Ä–µ–π–º–∞–º–∏).

**–í–∞–∂–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ:** –î–ª—è —Ä–∞–±–æ—Ç—ã —É—Ç–∏–ª–∏—Ç—ã —Ä–æ–±–æ—Ç –¥–æ–ª–∂–µ–Ω –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è —Å–≤–æ–∏—Ö —Ñ—Ä–µ–π–º–æ–≤ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –º–µ–∂–¥—É –Ω–∏–º–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Ç–æ–ø–∏–∫–µ.

### 1. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ [unitree_h1_visualization_ws](https://github.com/cyberbanana777/unitree_h1_visualization_ws) –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `show.launch.py` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π (—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º) –¥–ª—è —Ä–æ–±–æ—Ç–∞ Unitree H1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–∂–Ω–æ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏–∏.

–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –º–æ–∂–Ω–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ ["–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ"](https://github.com/cyberbanana777/unitree_h1_visualization_ws/tree/main?tab=readme-ov-file#-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)):

*   **–ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤ Rviz:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.
    ```bash
    ros2 launch h1_description description.launch.py mode:=without_hands launch_rviz:=True
    ```

*   **–ó–∞–ø—É—Å–∫ –±–µ–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:**
    ```bash
    ros2 launch h1_description description.launch.py mode:=without_hands
    ```

–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã launch-—Ñ–∞–π–ª–∞ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π: —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ä–æ–±–æ—Ç–æ–º, —Å–∏–º—É–ª—è—Ü–∏—è –∏ —Ç.–¥.), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
ros2 launch h1_description description.launch.py -s
```
–î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤—ã—à–µ launch-—Ñ–∞–π–ª–µ –∑–∞–ø—É—Å–∫–∞—è—é—Ç—Å—è –¥–≤–µ –Ω–æ–¥—ã: `robot_state_publisher` –∏ `robot_state_publisher`. 
`robot_state_publisher` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç URDF, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `robot_description` –∏ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å—É—Å—Ç–∞–≤–æ–≤ –∏–∑ —Ç–æ–ø–∏–∫–∞ `joint_states`, –ø—É–±–ª–∏–∫—É–µ–º–æ–≥–æ `robot_state_publisher`, –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä—è–º–æ–π –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∏ —Ä–æ–±–æ—Ç–∞ (–ø–µ—Ä–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç) –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ `tf`.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π**

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ª—é–±–æ–≥–æ –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
ros2 node list
```
–í —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–∑–ª–æ–≤ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —É–∑–µ–ª —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `/robot_state_publisher`.

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã:

```bash
ros2 topic list
```

–í —Å–ø–∏—Å–∫–µ —Ç–æ–ø–∏–∫–æ–≤ –¥–æ–ª–∂–µ–Ω—ã –±—ã—Ç—å —Ç–æ–ø–∏–∫–∏ `/tf_static` –∏ `/tf`.

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã `tf2_echo`

**–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã:**
```bash
ros2 run tf2_ros tf2_echo <–∏—Å—Ö–æ–¥–Ω—ã–π_—Ñ—Ä–µ–π–º> <—Ü–µ–ª–µ–≤–æ–π_—Ñ—Ä–µ–π–º>
```

**–ü—Ä–∏–º–µ—Ä:**
–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–∞–∑–∞ (`pelvis`) –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø—Ä–∞–≤–æ–≥–æ –ø–ª–µ—á–∞ (`right_shoulder_pitch_link`), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
ros2 run tf2_ros tf2_echo pelvis right_shoulder_pitch_link
```

**–ì–¥–µ –Ω–∞–π—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ—Ä–µ–π–º–æ–≤?**
*   –í –æ–∫–Ω–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ Rviz (–≤ —Ä–∞–∑–¥–µ–ª–µ TF).
*   –í URDF-–æ–ø–∏—Å–∞–Ω–∏–∏ –º–æ–¥–µ–ª–∏ —Ä–æ–±–æ—Ç–∞.

#### 3. –ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Å–æ–ª—å –Ω–∞—á–Ω—ë—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:

```bash
At time 1761151063.357288585
- Translation: [0.005, -0.155, 0.430]
- Rotation: in Quaternion [-0.216, 0.000, 0.000, 0.976]
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**

*   **Translation `[x, y, z]`** ‚Äî —ç—Ç–æ –≤–µ–∫—Ç–æ—Ä –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (–≤ –º–µ—Ç—Ä–∞—Ö) –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–∞ –∫ —Ü–µ–ª–µ–≤–æ–º—É.
    *   **X = 0.005 –º**: –ü—Ä–∞–≤–æ–µ –ø–ª–µ—á–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ—á—Ç–∏ –ø—Ä—è–º–æ –ø–æ –æ—Å–∏ X –æ—Ç —Ç–∞–∑–∞ (—Å–ª–µ–≥–∫–∞ –≤–ø–µ—Ä–µ–¥–∏).
    *   **Y = -0.155 –º**: –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –æ—Å–∏ Y –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–ª–µ—á–æ —Å–º–µ—â–µ–Ω–æ –≤–ª–µ–≤–æ –æ—Ç —Ç–∞–∑–∞ (–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ä–æ–±–æ—Ç–∞ –æ—Å—å Y –æ–±—ã—á–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–ª–µ–≤–æ).
    *   **Z = 0.430 –º**: –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–ª–µ—á–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—à–µ —Ç–∞–∑–∞.

*   **Rotation `[x, y, z, w]`** ‚Äî —ç—Ç–æ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –≤ –≤–∏–¥–µ –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω–∞.
    *   –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –Ω–µ–Ω—É–ª–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `x` –∏ `w` —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø–æ–≤–æ—Ä–æ—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤–æ–∫—Ä—É–≥ –æ—Å–∏ X.

#### –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É —Ñ—Ä–µ–π–º–∞–º–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏ –º–µ–Ω—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ –º–µ—Ä–µ –¥–≤–∏–∂–µ–Ω–∏—è –∑–≤–µ–Ω—å–µ–≤ —Ä–æ–±–æ—Ç–∞.

**–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–æ–±–æ—Ç–∞ (–∏–ª–∏ –µ–≥–æ —Å–∏–º—É–ª—è—Ü–∏–æ–Ω–Ω—É—é –º–æ–¥–µ–ª—å) –≤ –Ω—É–∂–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ, –¥–æ–∂–¥–∏—Ç–µ—Å—å –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏–π, –∏ —Ç–æ–ª—å–∫–æ –∑–∞—Ç–µ–º —Å–Ω–∏–º–∏—Ç–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `tf2_echo`.

## –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏ –∏–∑ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –¥—Ä—É–≥—É—é, –º–∞—Ç—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥

–û–±—â–∞—è —Ñ–æ—Ä–º—É–ª–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–æ—á–∫–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã A –≤ —Å–∏—Å—Ç–µ–º—É B:

**P‚ÇÇ = R √ó P‚ÇÅ + t**

–≥–¥–µ:
- **P‚ÇÅ** = [x‚ÇÅ, y‚ÇÅ, z‚ÇÅ] - —Ç–æ—á–∫–∞ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- **P‚ÇÇ** = [x‚ÇÇ, y‚ÇÇ, z‚ÇÇ] - —Ç–æ—á–∫–∞ –≤ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç  
- **R** - –º–∞—Ç—Ä–∏—Ü–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞ 3√ó3
- **t** = [t‚Çì, t·µß, t‚ÇÇ] - –≤–µ–∫—Ç–æ—Ä

## 2. –î–∞–Ω–Ω—ã–µ

```
Translation: t = [0.005, -0.155, 0.430]
Rotation: q = [-0.216, 0.000, 0.000, 0.976]  # [x, y, z, w]
Point: P‚ÇÅ = [0.1, 0.2, 0.3]
```

## 3. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω–∞ –≤ –º–∞—Ç—Ä–∏—Ü—É –ø–æ–≤–æ—Ä–æ—Ç–∞

### –§–æ—Ä–º—É–ª–∞ –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω–∞:
q = [x, y, z, w] = [q‚Çì, q·µß, q‚ÇÇ, q_w]

### –ú–∞—Ç—Ä–∏—Ü–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞ –∏–∑ –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω–∞:

```
    [1-2(q·µß¬≤+q‚ÇÇ¬≤)   2(q‚Çìq·µß-q_wq‚ÇÇ)   2(q‚Çìq‚ÇÇ+q_wq·µß) ]
R = [2(q‚Çìq·µß+q_wq‚ÇÇ)   1-2(q‚Çì¬≤+q‚ÇÇ¬≤)   2(q·µßq‚ÇÇ-q_wq‚Çì) ]
    [2(q‚Çìq‚ÇÇ-q_wq·µß)   2(q·µßq‚ÇÇ+q_wq‚Çì)   1-2(q‚Çì¬≤+q·µß¬≤) ]
```

### –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω–∞ q = [-0.216, 0.000, 0.000, 0.976]:

```
q‚Çì = -0.216, q·µß = 0.000, q‚ÇÇ = 0.000, q_w = 0.976

R = [1-2(0+0)       2(0-0)          2(0+0)        ]
    [2(0+0)         1-2(0.0467+0)   2(0-(-0.211)) ]
    [2(0-0)         2(0+(-0.211))   1-2(0.0467+0) ]

R = [1.000  0.000  0.000]
    [0.000  0.907  0.422]
    [0.000 -0.422  0.907]
```

## 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–∞

**P_rotated = R √ó P‚ÇÅ**

```
[1.000  0.000  0.000]   [0.1]   [0.1]
[0.000  0.907  0.422] √ó [0.2] = [0.907√ó0.2 + 0.422√ó0.3] = [0.1814 + 0.1266] = [0.308]
[0.000 -0.422  0.907]   [0.3]   [-0.422√ó0.2 + 0.907√ó0.3] = [-0.0844 + 0.2721] = [0.188]
```

**P_rotated = [0.1, 0.308, 0.188]**

## 5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

**P‚ÇÇ = P_rotated + t**

```
P‚ÇÇ = [0.1, 0.308, 0.188] + [0.005, -0.155, 0.430]
P‚ÇÇ = [0.105, 0.153, 0.618]
```

## –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏ –∏–∑ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –¥—Ä—É–≥—É—é —Å –ø–æ–º—â—å—é ROS2 –Ω–æ–¥—ã

### **–ü–æ–ª–Ω—ã–π –∫–æ–¥ –Ω–æ–¥—ã**
```python
#!/usr/bin/env python3
import rclpy
from rclpy.node import Node
from geometry_msgs.msg import PointStamped
from tf2_ros import Buffer, TransformListener
from tf2_geometry_msgs import do_transform_point

class SimpleTFNode(Node):
    def __init__(self):
        super().__init__('simple_tf_node')
        self.tf_buffer = Buffer()
        self.tf_listener = TransformListener(self.tf_buffer, self)
        self.get_logger().info("TF node started")

    def convert_point(self, point, source_frame, target_frame):
        try:
            # –ü–æ–ª—É—á–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é
            transform = self.tf_buffer.lookup_transform(
                target_frame,
                source_frame, 
                rclpy.time.Time()
            )
            
            # –°–æ–∑–¥–∞–µ–º —Ç–æ—á–∫—É –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
            point_msg = PointStamped()
            point_msg.header.frame_id = source_frame
            point_msg.point.x = point[0]
            point_msg.point.y = point[1]
            point_msg.point.z = point[2]
            
            # –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é
            new_point = do_transform_point(point_msg, transform)
            
            return [new_point.point.x, new_point.point.y, new_point.point.z]
            
        except Exception as e:
            self.get_logger().error(f"Transform failed: {e}")
            return None

def main():
    rclpy.init()
    node = SimpleTFNode()
    
    # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    original_point = [1.0, 0.5, 0.2]
    
    result = node.convert_point(
        original_point,
        'frame_a',  # –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ—Ä–µ–π–º
        'frame_b'   # —Ü–µ–ª–µ–≤–æ–π —Ñ—Ä–µ–π–º
    )
    
    if result:
        node.get_logger().info(f"Original: {original_point}")
        node.get_logger().info(f"Transformed: {result}")
    
    node.destroy_node()
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```

---

## **–ü–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã**

### **1. –ò–º–ø–æ—Ä—Ç—ã**
```python
#!/usr/bin/env python3
import rclpy
from rclpy.node import Node
from geometry_msgs.msg import PointStamped
from tf2_ros import Buffer, TransformListener
from tf2_geometry_msgs import do_transform_point
```
- **`rclpy`** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å ROS2 –¥–ª—è Python
- **`Node`** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è ROS2-–Ω–æ–¥
- **`PointStamped`** - —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ç–æ—á–∫–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏
- **`Buffer`, `TransformListener`** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã TF2 –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- **`do_transform_point`** - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫ —Ç–æ—á–∫–µ

### **2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–¥—ã**
```python
class SimpleTFNode(Node):
    def __init__(self):
        super().__init__('simple_tf_node')
        self.tf_buffer = Buffer()
        self.tf_listener = TransformListener(self.tf_buffer, self)
        self.get_logger().info("TF node started")
```
- **`super().__init__('simple_tf_node')`** - —Å–æ–∑–¥–∞–µ–º –Ω–æ–¥—É —Å –∏–º–µ–Ω–µ–º `simple_tf_node`
- **`tf_buffer`** - –±—É—Ñ–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π –º–µ–∂–¥—É —Ñ—Ä–µ–π–º–∞–º–∏
- **`tf_listener`** - —Å–ª—É—à–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –±—É—Ñ–µ—Ä –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è–º–∏
- **`get_logger().info()`** - –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### **3. –ú–µ—Ç–æ–¥ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–æ—á–∫–∏**
```python
def convert_point(self, point, source_frame, target_frame):
    try:
        # –ü–æ–ª—É—á–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é
        transform = self.tf_buffer.lookup_transform(
            target_frame,
            source_frame, 
            rclpy.time.Time()
        )
```
- **`lookup_transform(target, source, time)`** - –∑–∞–ø—Ä–æ—Å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏:
  - `target_frame` - —Ü–µ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–∫—É–¥–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º)
  - `source_frame` - –∏—Å—Ö–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–æ—Ç–∫—É–¥–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º)
  - `rclpy.time.Time()` - –≤—Ä–µ–º—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ (0 = –ø–æ—Å–ª–µ–¥–Ω—è—è –¥–æ—Å—Ç—É–ø–Ω–∞—è)

```python
        # –°–æ–∑–¥–∞–µ–º —Ç–æ—á–∫—É –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
        point_msg = PointStamped()
        point_msg.header.frame_id = source_frame
        point_msg.point.x = point[0]
        point_msg.point.y = point[1]
        point_msg.point.z = point[2]
```
- –°–æ–∑–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ **`PointStamped`** - —Ç–æ—á–∫–∞ —Å "—à—Ç–∞–º–ø–æ–º":
  - `header.frame_id` - —É–∫–∞–∑—ã–≤–∞–µ–º —Å–∏—Å—Ç–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–æ—á–∫–∏
  - `point.x, y, z` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–∫–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ

```python
        # –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é
        new_point = do_transform_point(point_msg, transform)
        
        return [new_point.point.x, new_point.point.y, new_point.point.z]
```
- **`do_transform_point(point, transform)`** - –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞—Ç—Ä–∏—Ü—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫ —Ç–æ—á–∫–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ `[x, y, z]`

### **4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
```python
    except Exception as e:
        self.get_logger().error(f"Transform failed: {e}")
        return None
```
- –õ–æ–≤–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏—è –µ—Å–ª–∏:
  - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –º–µ–∂–¥—É —Ñ—Ä–µ–π–º–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
  - –§—Ä–µ–π–º—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
  - –ò—Å—Ç–µ–∫ —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è

### **5. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**
```python
def main():
    rclpy.init()
    node = SimpleTFNode()
    
    # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    original_point = [1.0, 0.5, 0.2]
    
    result = node.convert_point(
        original_point,
        'frame_a',  # –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ—Ä–µ–π–º
        'frame_b'   # —Ü–µ–ª–µ–≤–æ–π —Ñ—Ä–µ–π–º
    )
```
- **`rclpy.init()`** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ROS2
- –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–æ–¥—ã
- –ó–∞–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é —Ç–æ—á–∫—É `[1.0, 0.5, 0.2]`
- –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–∑ `frame_a` –≤ `frame_b`

---

## üöÄ **–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–¥—É**

–°–û–∑–¥–∞–π—Ç–µ ROS2 –ø–∞–∫–µ—Ç `simple_tf_demo` –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —É–∂–µ —Å—É—â–µ—Å–≤—Ç—É–µ—é—â–∏–π –∏ –≤ –ø–∞–ø–∫–µ /src
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `simple_tf_node.py`. 
–ü–û–¥—Ä–æ–±–Ω–µ–µ –æ —Å–æ–∑–¥–µ–Ω–∏–∏ ROS2 –ø–∞–∫–µ—Ç–∞ –∏ –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å–º–æ—Ç—Ä–∏ –≤ –º–µ–º—Ç–æ–¥–∏—á–µ—Å–∫–æ–º —É–∫–∞–∑–∞–Ω–∏–∏ 6.3 –ü—É–±–ª–∏–∫–∞—Ç–æ—Ä –∏ –ø–æ–¥–ø–∏—Å—á–∏–∫.

 **2. –í —Ñ–∞–π–ª–µ package.xml**

–ü–æ—Å–ª–µ —Ç–µ–≥–∞ `<license></license>` –¥–æ–±–∞–≤—å—Ç–µ

```xml

  <depend>rclpy</depend>
  <depend>geometry_msgs</depend>
  <depend>tf2_ros</depend>
  <depend>tf2_geometry_msgs</depend>
  
```

### **3. –í —Ñ–∞–π–ª–µ setup.py**

–ù–µ –∑–∞–±—É–¥—Ç–µ —É–∫–∞–∑–∞—Ç—å —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:
`simple_tf_demo` - –ø–∞–∫–µ—Ç
`simple_tf_node` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

```python

    entry_points={
        'console_scripts': [
            'simple_tf_node = simple_tf_demo.simple_tf_node:main',
        ],
    },
)
```

### **4. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫**
```bash
colcon build
source install/setup.bash
```

### **5. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏**
```bash
# Terminal 1 - –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π (—Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤ rviz)
ros2 launch h1_description description.launch.py mode:=without_hands launch_rviz:=True

# Terminal 2 - –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—à—É –Ω–æ–¥—É
ros2 run simple_tf_demo simple_tf_node
```

## üìä **–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥**
```
[INFO] [simple_tf_node]: TF node started
[INFO] [simple_tf_node]: Original: [1.0, 0.5, 0.2]
[INFO] [simple_tf_node]: Transformed: [2.0, 0.5, 0.2]
```
(–¢–æ—á–∫–∞ —Å–º–µ—Å—Ç–∏–ª–∞—Å—å –ø–æ X –Ω–∞ 1 –º–µ—Ç—Ä, —Ç–∞–∫ –∫–∞–∫ –º—ã –∑–∞–¥–∞–ª–∏ —Å–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É frame_a –∏ frame_b)